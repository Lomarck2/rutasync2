<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RutaSync - Rutas y Paradas</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body, html {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e1e2f;
      color: #f1f1f1;
      height: 100%;
    }

    #panel {
      position: fixed;
      top: 0;
      left: 0;
      width: 280px;
      height: 100%;
      background-color: #2c2f48;
      padding: 20px;
      box-shadow: 2px 0 6px rgba(0,0,0,0.4);
      z-index: 999;
      overflow-y: auto;
      transition: transform 0.3s ease;
    }

    #panel.hidden {
      transform: translateX(-100%);
    }

    .toggle-panel-btn {
      position: absolute;
      top: 20px;
      left: 290px;
      background-color: #5c6bc0;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 14px;
      cursor: pointer;
      z-index: 1000;
    }

    .input-container {
      display: flex;
      align-items: center;
      background-color: #383b5c;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .input-container i {
      margin-right: 10px;
    }

    .input-container input {
      flex: 1;
      background: transparent;
      border: none;
      color: #fff;
      font-size: 14px;
      outline: none;
    }

    .input-container button {
      background: none;
      border: none;
      color: #fff;
      cursor: pointer;
    }

    .btn {
      width: 100%;
      padding: 10px;
      background-color: #5c6bc0;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 10px;
    }

    .menu-toggle {
      width: 100%;
      padding: 10px;
      background-color: #44476a;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 10px;
    }

    .card-section {
      display: none;
      flex-direction: column;
      gap: 10px;
    }

    .card {
      background: #383b5c;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      text-align: center;
    }

    .card i {
      font-size: 24px;
      margin-bottom: 8px;
      display: block;
    }

    .card span {
      font-size: 16px;
    }

    #map {
      margin-left: 280px;
      height: 100vh;
      width: calc(100% - 280px);
      transition: margin-left 0.3s ease, width 0.3s ease;
    }

    #panel.hidden + .toggle-panel-btn + #map {
      margin-left: 0;
      width: 100%;
    }

    @media (max-width: 768px) {
      #panel {
        width: 100%;
        height: auto;
        position: relative;
      }
      .toggle-panel-btn {
        left: 10px;
        top: auto;
        bottom: 10px;
      }
      #map {
        margin: 0;
        width: 100%;
        height: calc(100vh - 500px);
      }
    }
    select,
    ::picker(select) {
        appearance: base-select;
    }
    select {
        flex: 1;
    }
    label {
        width: fit-content;
        align-self: center;
    }
  </style>
  <style>
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 30px;
      
      display: flex;
      justify-content: center;
      align-items: hidden;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .overlay.active{
      visibility: visible;
      opacity: 1;
    }
    .popup{
      background: rgba(5, 102, 117,0.8);
      padding: 5px;
      border-radius: 5px;
      text-align: center;
    }
  </style>
  <script
    src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
    crossorigin="anonymous">
  </script>
  <script src="index6.js"></script>
  
  <script type="module"> 
    var contador=0;
    import rutas from './JSON/Ruta_Estaciones.json' with {type: 'json'};     
    import notis from './JSON/Notificaciones.json' with {type: 'json'};           
    window.onload = () => {
        busStations = rutas;
        Noticias = notis;
        setInterval(function (){
          //mostrarUbicacionUsuario(0);
          /*contador++;
          console.log(contador);*/
        },10000);
    }
  </script>
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD6qeL8vY9n4IJ9wmvMEGjDVLkZYu76fss&loading=async&libraries=geometry,marker,places&callback=initApp">
  </script>
  
</head>
<body>
  <div id="panel">
    <div class="input-container" id="divOrigen">
      <i class="fas fa-map-marker-alt"></i>
      <input id="origen" type="text" placeholder="Ingresa origen">
      <button id="btn-ubicacion" title="Usar mi ubicación", onclick="mostrarUbicacionUsuario()">
        <i class="fas fa-crosshairs"></i>
      </button>
    </div>
    <div class="input-container" id="divDestino">
      <i class="fas fa-flag-checkered"></i>
      <input id="destino" type="text" placeholder="Ingresa destino">
    </div>    
    <button class="btn" onclick="buscarRutas()">Obtener viaje</button>
    <div class="input-container">
      <!-- <label for="cmbRutas">Rutas:</label> -->
      <select id="cmbRutas" name="cmbRutas" onchange="rutasDestino(this.value)">
        <option value="">Selecciona una ruta</option>
      </select> 
    </div>
    <!-- <button class="btn" onclick="actualizarUbicacion()">Iniciar viaje</button> -->
    <button class="btn" onclick="allMarkers()">Iniciar viaje</button>
    <button class="menu-toggle" onclick="toggleMenu()">Mostrar/Ocultar Menú</button>
    <div class="card-section" id="card-section">
      <div class="card" id="clock-card">
        <i class="fas fa-clock"></i>
        <span id="time">--:--:--</span>
      </div>
      <div class="card" id="chat-card" onclick="abrirChat()">
        <i class="fas fa-comments"></i>
        <span id="notificacionesBox">Chat</span>
      </div>
      <div class="card" id="recorridos-card" onclick="mostrarRecorridos()">
        <i class="fas fa-route"></i>
        <span>Mis recorridos</span>
      </div>
    </div>
  </div>
  <button class="toggle-panel-btn" onclick="togglePanel()">☰</button>
  <div id="map">Cargando Mapa</div>
  <div class="overlay" onclick="this.classList.remove('active')">
    <div class="popup" id="labelInfo">
      <!-- <p id="lblDistancia"></p>
      <p id="lblTiempo"></p> 
      <p id="labelInfo"></p> -->
    </div>
  </div>
</body>
</html>



